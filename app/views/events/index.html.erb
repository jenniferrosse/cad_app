<% content_for(:title, 'Events')%>
<div class="container">
  <div class="row">
    <div class="col-md-10 col-md-offset-1">
      <h1 class="text-center">events</h1>
      <hr>
    </div>
  </div>

    <div class="row">
      <div class="col-md-3 col-md-offset-3">
        <div class="btn-group" role="group" aria-label="...">
          <button type="button" class="btn btn-default">Upcoming</button>
          <button type="button" class="btn btn-default">Past</button>
          <button type="button" class="btn btn-default">Show All</button>
        </div>
      </div>
      <div class="col-md-4">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Search events...">
          <span class="input-group-btn">
            <button class="btn btn-default" type="button">Go!</button>
          </span>
        </div><!-- /input-group -->
      </div><!-- /.col-lg-6 -->
    </div><!-- /.row -->
<br>
<br>
<br>
<p class="text-center">
    <% if admin_signed_in? %>
      <%= link_to 'New Event', new_event_path, class: "btn btn-default" %>
    <% end %>
  </p>
 
    <% @events.each do |event| %>
      <div class="row event">
        <div class="col-xs-10 col-xs-offset-1 col-sm-3 col-sm-offset-2 col-md-2 col-md-offset-2">
            <%= link_to image_tag(event.event_thumbnail.url(:small), class: "img-responsive aspect"), event %>
        </div><!-- end col -->
        <div class="col-xs-10 col-sm-5 col-md-6">
          <h3><%= link_to event.title, event %></h3>
          <strong><em><%= event.gallery.try(:gallery_name) %></em></strong><br>
            <em><%= event.gallery.try(:address) %></em><br>
            <br>
            <%= event.date_info %><br>
            <br>
            <p class="text-justify"><% if event.description.length > 255 %>
              <%= truncate(event.description, length: 255) %>
              <%= link_to 'more...', '', class: "read-more-#{event.id}" %>
              <script>
                $('.read-more-<%= event.id %>').on('click', function(e) {
                  e.preventDefault()
                  $(this).parent().html('<%= escape_javascript event.description %>')
                })
              </script>
            <% else %>
              <%= event.description %>
            <% end %></p>
            <% if admin_signed_in? %>
              <%= link_to 'Delete', event, method: :delete, data: { confirm: 'Are you sure?' } %>
            <% end %>
            <hr>
        </div><!-- end col -->
      </div><!-- end row -->
    <% end %>
  
  <br>
  <p class="text-center">
    <% if admin_signed_in? %>
      <%= link_to 'New Event', new_event_path, class: "btn btn-default" %>
    <% end %>
  </p>
</div>


